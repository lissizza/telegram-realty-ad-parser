# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ LLM

## –ü—Ä–æ–±–ª–µ–º–∞

–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞–Ω–∏–º–∞–ª–∞ **18-27 —Å–µ–∫—É–Ω–¥** –Ω–∞ –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ.

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
```
–ú–æ–¥–µ–ª—å: glm-4.6
Prompt tokens: ~3,100 —Ç–æ–∫–µ–Ω–æ–≤
Completion tokens: 1,000 —Ç–æ–∫–µ–Ω–æ–≤ (–¥–æ—Å—Ç–∏–≥–∞–ª –ª–∏–º–∏—Ç–∞)
Total: ~4,100 —Ç–æ–∫–µ–Ω–æ–≤
–í—Ä–µ–º—è: 23-27 —Å–µ–∫—É–Ω–¥
Max tokens: 1000
```

### –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–û–≥—Ä–æ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç** (~3,100 —Ç–æ–∫–µ–Ω–æ–≤)
   - –°–æ–¥–µ—Ä–∂–∞–ª 5 –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ —Å –ø–æ–ª–Ω—ã–º–∏ JSON –æ–±—ä–µ–∫—Ç–∞–º–∏
   - –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
   - –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞

2. **Completion –¥–æ—Å—Ç–∏–≥–∞–ª –ª–∏–º–∏—Ç–∞**
   - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ max_tokens=1000
   - –ú–æ–¥–µ–ª—å –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–∞ –≤–µ—Å—å –ª–∏–º–∏—Ç
   - –í–æ–∑–º–æ–∂–Ω–æ, –æ–±—Ä–µ–∑–∞–ª–∏—Å—å –æ—Ç–≤–µ—Ç—ã

3. **–ú–µ–¥–ª–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å**
   - glm-4.6: –±–æ–ª–µ–µ –º–æ—â–Ω–∞—è, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–∞—è
   - –î–æ—Ä–æ–∂–µ –≤ 7 —Ä–∞–∑

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏: glm-4.6 ‚Üí glm-4.5-air

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ glm-4.5-air:**
- ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ –æ–±—Ä–∞–±–æ—Ç–∫–∞
- ‚úÖ –î–µ—à–µ–≤–ª–µ –≤ 7 —Ä–∞–∑ ($0.05 vs $0.35 –∑–∞ 1M input)
- ‚úÖ –í—ã—à–µ –ª–∏–º–∏—Ç—ã concurrency
- ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### 2. –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞: ~3,100 ‚Üí ~800 —Ç–æ–∫–µ–Ω–æ–≤ (75% —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ)

**–£–¥–∞–ª–µ–Ω–æ:**
- 4 –∏–∑ 5 –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ (–æ—Å—Ç–∞–≤–ª–µ–Ω–æ 2 –∫–æ—Ä–æ—Ç–∫–∏—Ö)
- –î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞

**–û—Å—Ç–∞–≤–ª–µ–Ω–æ:**
- –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
- JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ (—Å—Ç—É–¥–∏—è=1 –∫–æ–º–Ω–∞—Ç–∞, —Ñ–æ—Ä–º–∞—Ç —ç—Ç–∞–∂–µ–π)
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã

### 3. –£–º–µ–Ω—å—à–µ–Ω–∏–µ max_tokens: 1000 ‚Üí 500

**–ü—Ä–∏—á–∏–Ω—ã:**
- JSON –æ—Ç–≤–µ—Ç –æ–±—ã—á–Ω–æ –∫–æ—Ä–æ—Ç–∫–∏–π (~200-400 —Ç–æ–∫–µ–Ω–æ–≤)
- 500 —Ç–æ–∫–µ–Ω–æ–≤ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –ª—é–±–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
- –ú–µ–Ω—å—à–µ —Ç–æ–∫–µ–Ω–æ–≤ = –±—ã—Å—Ç—Ä–µ–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

### 4. –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–¢–µ–ø–µ—Ä—å –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è:**
```
Z.AI API call: 17.08s | tokens: 3032 prompt + 806 completion = 3838 total | model: glm-4.5-air
```

–ü–æ–∑–≤–æ–ª—è–µ—Ç –≤–∏–¥–µ—Ç—å:
- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ (prompt/completion/total)
- –ò—Å–ø–æ–ª—å–∑—É–µ–º—É—é –º–æ–¥–µ–ª—å

### 5. –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∞–π–º–∞—É—Ç—ã

- 60 —Å–µ–∫—É–Ω–¥ –¥–ª—è –≤—Å–µ—Ö API –≤—ã–∑–æ–≤–æ–≤
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏–µ –ø—Ä–∏ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞—Ö

## –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–ø—Ä–æ–≥–Ω–æ–∑)
```
–ú–æ–¥–µ–ª—å: glm-4.5-air
Prompt tokens: ~800-1000 —Ç–æ–∫–µ–Ω–æ–≤ (—Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ 75%)
Completion tokens: ~300-500 —Ç–æ–∫–µ–Ω–æ–≤
Total: ~1,300 —Ç–æ–∫–µ–Ω–æ–≤ (—Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ 68%)
–û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è: 8-12 —Å–µ–∫—É–Ω–¥ (—É–ª—É—á—à–µ–Ω–∏–µ 50-60%)
Max tokens: 500
```

### –≠–∫–æ–Ω–æ–º–∏—è
- **–°–∫–æ—Ä–æ—Å—Ç—å:** 50-60% –±—ã—Å—Ç—Ä–µ–µ (–ø—Ä–æ–≥–Ω–æ–∑)
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** 75% –¥–µ—à–µ–≤–ª–µ (—Ç–æ–∫–µ–Ω—ã + –º–æ–¥–µ–ª—å)
- **Concurrency:** –º–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ª–∏–º–∏—Ç—ã

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏:
```bash
docker-compose logs app | grep "API call:" | tail -20
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```
Z.AI API call: 8-12s | tokens: 800-1000 prompt + 300-500 completion = 1300-1500 total
```

### –ï—Å–ª–∏ —Å–∫–æ—Ä–æ—Å—Ç—å –≤—Å–µ –µ—â–µ –º–µ–¥–ª–µ–Ω–Ω–∞—è

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. Throttling –æ—Ç Z.AI –∏–∑-–∑–∞ –ª–∏–º–∏—Ç–æ–≤ concurrency
2. –û–±—â–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ API Z.AI
3. –°–µ—Ç–µ–≤—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ª–∏–º–∏—Ç: https://z.ai/manage-apikey/rate-limits
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å: https://z.ai/manage-apikey/billing
3. –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ Z.AI support –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞
4. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ glm-4-flash (—Å–∞–º–∞—è –±—ã—Å—Ç—Ä–∞—è)

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ concurrency

–í–æ–π–¥–∏—Ç–µ –Ω–∞ https://z.ai/manage-apikey/rate-limits –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –¢–µ–∫—É—â–∏–π –ª–∏–º–∏—Ç –¥–ª—è glm-4.5-air
- –°–∫–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –ï—Å—Ç—å –ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –≤—Ä–µ–º—è —Å—É—Ç–æ–∫

### 2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —Å–∫–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–µ–ª–∞–µ—Ç—Å—è –≤ –º–∏–Ω—É—Ç—É:
```bash
docker-compose logs app --since 10m | grep "Processing message.*with LLM" | wc -l
```

–ï—Å–ª–∏ —á–∞—Å—Ç–æ—Ç–∞ –≤—ã—Å–æ–∫–∞—è (>10-15/–º–∏–Ω), –≤–æ–∑–º–æ–∂–Ω–æ throttling.

### 3. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã

–ï—Å–ª–∏ —Å–∫–æ—Ä–æ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–Ω–∞:
- **glm-4-flash:** —Å–∞–º–∞—è –±—ã—Å—Ç—Ä–∞—è –º–æ–¥–µ–ª—å Z.AI
- **–ë–∞—Ç—á–∏–Ω–≥:** –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å
- **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã –ø–æ–≤—Ç–æ—Ä–Ω–æ
- **–ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è:** –µ—Å–ª–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –ª–∏–º–∏—Ç—ã

## –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```env
LLM_PROVIDER=zai
LLM_MODEL=glm-4.5-air
LLM_BASE_URL=https://api.z.ai/api/coding/paas/v4
LLM_MAX_TOKENS=500
LLM_TEMPERATURE=0.1
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ú–æ–¥–µ–ª—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∞ –Ω–∞ glm-4.5-air
2. ‚úÖ –ü—Ä–æ–º–ø—Ç —Å–æ–∫—Ä–∞—â–µ–Ω –Ω–∞ 75%
3. ‚úÖ Max tokens —É–º–µ–Ω—å—à–µ–Ω –¥–æ 500
4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
5. ‚è≥ –û–∂–∏–¥–∞–µ–º –ø–µ—Ä–≤—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π
6. üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
7. üìä –ü—Ä–æ–≤–µ—Ä–∏–º –ª–∏–º–∏—Ç—ã –Ω–∞ —Å–∞–π—Ç–µ Z.AI –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
